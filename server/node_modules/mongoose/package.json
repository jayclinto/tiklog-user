mestamps:void 0:(t!==this.$timestamps()&&(this.$__.timestamps=t),this)},ft.prototype.overwrite=function(t){for(var e=0,r=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(t))));e<r.length;e++){var n=r[e];"_id"!==n&&(this.$__schema.options.versionKey&&n===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&n===this.$__schema.options.discriminatorKey||this.$set(n,t[n]))}return this},ft.prototype.$set=function(t,e,r,n){var i=this;J.isPOJO(r)&&(n=r,r=void 0);var o,a,s,f,h=n&&n.merge,p=r&&!0!==r,d=!0===r,y=0,b=n&&"strict"in n?n.strict:this.$__.strictMode;if(p&&((this.$__.adhocPaths||(this.$__.adhocPaths={}))[t]=this.$__schema.interpretAsType(t,r,this.$__schema.options)),null==t){var _=[e,t];t=_[0],e=_[1]}else if("string"!=typeof t){if(t instanceof ft&&(t=t.$__isNested?t.toObject():t._doc),null==t){var w=[e,t];t=w[0],e=w[1]}f=e?e+".":"";var S=(o=L(this.$__schema,t)).length,E=n&&n._skipMinimizeTopLevel||!1;if(0===S&&E)return delete n._skipMinimizeTopLevel,e&&this.$set(e,{}),this;for(var A=0;A<S;++A){var j=f+(s=o[A]);a=this.$__schema.pathType(j);var $=t[s];if(!0!==r||f||null==$||"nested"!==a||null==this._doc[s]?n=Object.assign({},n,{_skipMinimizeTopLevel:!1}):(delete this._doc[s],n=Object.assign({},n,{_skipMinimizeTopLevel:!0})),J.isNonBuiltinObject($)&&"nested"===a)this.$set(f+s,t[s],d,Object.assign({},n,{_skipMarkModified:!0})),ht(this.$get(f+s),f+s,this);else if(b){if(d&&void 0===t[s]&&void 0!==this.$get(j))continue;if("adhocOrUndefined"===a&&(a=D(this,j,{typeOnly:!0})),"real"===a||"virtual"===a){var x=t[s];this.$set(f+s,x,d,n)}else if("nested"===a&&t[s]instanceof ft)this.$set(f+s,t[s].toObject({transform:!1}),d,n);else if("throw"===b)throw"nested"===a?new g(s,t[s]):new O(s)}else void 0!==t[s]&&this.$set(f+s,t[s],d,n)}for(var P={},k=Object.keys(this.$__schema.tree),R=0,T=k.length;R<T;++R)(s=k[R])&&this._doc.hasOwnProperty(s)&&(P[s]=void 0);return this._doc=Object.assign(P,this._doc),this}var I=this.$__schema.pathType(t);"adhocOrUndefined"===I&&(I=D(this,t,{typeOnly:!0})),e=C(e);var B,N=null!=i.$__.priorDoc?i.$__.priorDoc.$__getValue(t):d?void 0:i.$__getValue(t);if("nested"===I&&e){if("object"===l(e)&&null!=e){if(null!=e.$__&&(e=e.toObject(z)),null==e)return this.invalidate(t,new m.CastError("Object",e,t)),this;var U=null!=this.$__.savedState&&this.$__.savedState.hasOwnProperty(t);if(null!=this.$__.savedState&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(t)){var q=this.$__getValue(t);this.$__.savedState[t]=q;for(var F=0,V=Object.keys(q||{});F<V.length;F++){var H=V[F];this.$__.savedState[t+"."+H]=q[H]}}if(h)return this.$set(e,t,d);this.$__setValue(t,null),M(this,t);var K=L(this.$__schema,e,t);this.$__setValue(t,{});var G,Y=c(K);try{for(Y.s();!(G=Y.n()).done;){var Q=G.value;this.$set(t+"."+Q,e[Q],d,n)}}catch(t){Y.e(t)}finally{Y.f()}return null!=N&&J.deepEqual(U?this.$__.savedState[t]:N,e)?this.unmarkModified(t):this.markModified(t),this}return this.invalidate(t,new m.CastError("Object",e,t)),this}var X=-1===t.indexOf(".")?[t]:t.split(".");if("string"==typeof this.$__schema.aliases[X[0]]&&(X[0]=this.$__schema.aliases[X[0]]),"adhocOrUndefined"===I&&b){var Z;for(y=0;y<X.length;++y){var tt=X.slice(0,y+1).join(".");if(y+1<X.length&&"virtual"===this.$__schema.pathType(tt))return W.set(t,e,this),this;if(null!=(B=this.$__schema.path(tt))&&B instanceof v){Z=!0;break}}if(null==B&&(B=D(this,t)),!Z&&!B){if("throw"===b)throw new O(t);return this}}else{if("virtual"===I)return(B=this.$__schema.virtualpath(t)).applySetters(e,this),this;B=this.$__path(t)}var et,rt=this._doc,nt="";for(y=0;y<X.length-1;++y)rt=rt[X[y]],nt+=(0!==nt.length?".":"")+X[y],rt||(this.$set(nt,{}),this.$__isSelected(nt)||this.unmarkModified(nt),rt=this.$__getValue(nt));if(X.length<=1)et=t;else{var it=X.length;for(y=0;y<it;++y){var at=X.slice(0,y+1).join(".");if(null===this.$get(at,null,{getters:!1})){et=at;break}}et||(et=t)}if(!B)return this.$__set(et,t,n,d,X,B,e,N),"nested"===I&&null==e&&M(this,t),this;if((B.$isSingleNested||B.$isMongooseArray)&&function(t,e){if(t.$__.validationError){for(var r=0,n=Object.keys(t.$__.validationError.errors);r<n.length;r++){var i=n[r];i.startsWith(e+".")&&delete t.$__.validationError.errors[i]}0===Object.keys(t.$__.validationError.errors).length&&(t.$__.validationError=null)}}(this,t),null!=e&&h&&B.$isSingleNested){e instanceof ft&&(e=e.toObject({virtuals:!1,transform:!1}));for(var st=0,ut=Object.keys(e);st<ut.length;st++){var ct=ut[st];this.$set(t+"."+ct,e[ct],d,n)}return this}var lt=!0;try{var pt,dt=function(){if(null==B.options)return!1;if(!(e instanceof ft))return!1;var t=e.constructor,r=B.options.ref;if(null!=r&&(r===t.modelName||r===t.baseModelName))return!0;var n=B.options.refPath;if(null==n)return!1;var i=e.get(n);return i===t.modelName||i===t.baseModelName}(),yt=!1;if(dt&&e instanceof ft&&(!e.$__.wasPopulated||J.deepEqual(e.$__.wasPopulated.value,e._id))){var bt=B&&B.$isSingleNested?B.cast(e,this):e._id;this.$populated(t,bt,u({},ot,e.constructor)),e.$__.wasPopulated={value:bt},yt=!0}var mt=this.$__schema.options.typeKey;if(B.options&&Array.isArray(B.options[mt])&&B.options[mt].length&&B.options[mt][0].ref&&function(t,e){if(!Array.isArray(t))return!1;if(0===t.length)return!1;var r,n=c(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!(i instanceof ft))return!1;if(null==i.constructor.modelName)return!1;if(i.constructor.modelName!=e&&i.constructor.baseModelName!=e)return!1}}catch(t){n.e(t)}finally{n.f()}return!0}(e,B.options[mt][0].ref)){pt=u({},ot,e[0].constructor),this.$populated(t,e.map((function(t){return t._id})),pt);var vt,gt=c(e);try{for(gt.s();!(vt=gt.n()).done;){var _t=vt.value;_t.$__.wasPopulated={value:_t._id}}}catch(t){gt.e(t)}finally{gt.f()}yt=!0}if(null!=this.$__schema.singleNestedPaths[t]||dt&&B.$isSingleNested&&e.$__||(e=null!=n&&n.overwriteImmutable?B.applySetters(e,this,!1,N,{overwriteImmutable:!0}):B.applySetters(e,this,!1,N)),Array.isArray(e)&&!Array.isArray(B)&&B.$isMongooseDocumentArray&&0!==e.length&&null!=e[0]&&null!=e[0].$__&&null!=e[0].$__.populated){for(var wt=Object.keys(e[0].$__.populated),St=function(){var r=Et[Ot];i.$populated(t+"."+r,e.map((function(t){return t.$populated(r)})),e[0].$__.populated[r].options)},Ot=0